---
id: 5001
state: approved
created: 2023-05-07
placement:
  category: meta
  order: 10
---

# Event Payload Specification

Event  is a specification for describing event data in a common way. 
It provides a standard format for events generated by cloud services and systems, 
allowing for interoperability and seamless integration across different cloud platforms 
and event-driven architectures.

Webhooks is one such cloud based event in which the API server calls the client,
rather than the other way around.  API consumers register callback URIs for
specific events. When an event occurs, the server calls the consumer's
registered callback URI with information related to the event.

The AIPs in this section provide guidance for both the behavior of Event APIs
and the structure of the request made to a client when an event occurs.

## Guidance

Information specific to the event type **must** be represented in the `payload`
field.

### Payloads

Every event type **must** have a registered payload.  For event types that will
_never_ contain any event type-specific information, `google.protobuf.Empty`
**may** be used.  However, event types which may add event type-specific
information in the future **should** define an empty payload message to which
fields can be added as needed.

#### Events triggered by service API methods

If the event was triggered by a resource-oriented service API method, the name of the event
type **should** be the resource name followed by the past participle of the method's verb.  
For example, the standard `CreateBook` method might trigger a `BookCreated` event; the
custom `ArchiveBook` method might trigger a `BookArchived` event.

**Note:** When this would result in an ungrammatical event type, which may occur with
multi-word verbs, an equivalent grammatically correct form **should** be used.
For example, a `GenerateBookSynopsis` custom method with a verb form like
`book:generateSynopsis`, the payload should be named `BookSynopsisGenerated`.

The first field of the payload **must** be a [resource reference] to the resource in question.

```proto
// Payload for the BookArchived event, which fires after the `ArchiveBook` method is successfully executed.
message BookArchived {
  option (roblox.open_cloud.api.webhook_payload) = {
     event_name: "BookArchived"  
  }
  
  // The path of the book.
  // Format: publishers/{publisher}/books/{book}
  string book = 1 [
    (google.api.resource_reference) = {
      type: "apis.roblox.com/library/Book"
    }];
}
```

### Versioning

Event payloads **must** be versioned, and API consumers **must** register callback
URIs for a specific version of a payload.

Event payloads with resource references **must** be versioned with the API
containing those resources. Event payloads with resource references to resources
in multiple APIs must be versioned with one of those APIs, and **must not** change
which API is used to version the payload.

Event payloads without resource references, and without any other relationship to
a service API, **must** be versioned.

Breaking changes to a event payload **must not** be made within a major version.

### Additional metadata

Payloads **must** include only information specific to the event that triggered the
webhook callback. Any additional metadata not pertaining to the event should be sent
in a side channel and **must not** be included in the payload. This includes
standard headers such as "retry-count", "signature", and "request-origin".

## Further reading

- [AIP-1]: AIP purpose and guidelines

<!-- prettier-ignore-start -->
[AIP-1]: ../general/0001.md
[AIP-180]: ../general/0180.md
[wp]: [https://github.rbx.com/Roblox/open-cloud-contracts/blob/master/roblox/open_cloud/api/webhooks/notification.proto]
[resource reference]: ../general/0124.md
<!-- prettier-ignore-end -->